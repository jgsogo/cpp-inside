<html>
<body>
<script type="text/javascript" src="libcrnd.js"></script>

<script type="text/javascript">
console.info("CRND JS wrapper");

function help_callback(state, data, status) {
    alert("Called from C")
	//alert(Pointer_stringify(text));
}

function functionExists(f) {
	return f && typeof f === "function";
}
/*
function help_message(state, data, status) {
    console.log('this was invoked by C, written in JS');
}
*/
Module.onRuntimeInitialized = function() {
    console.info("Checking functions exist");
    assert(functionExists(Module._help));
    assert(functionExists(Module._sample));

    // Call the help
    var pointer = addFunction(help_callback);
    var call = Module.cwrap('help', 'void', ['pointer', 'pointer']);
    call(null, pointer);
    removeFunction(pointer);
}

</script>

</body>
</html>
